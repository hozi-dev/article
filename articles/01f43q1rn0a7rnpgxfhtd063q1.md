---
title: "GitHubCLIのGitHub Actions関連機能を試してみた"
type: "tech"
category: []
description: ""
publish: false
---

# はじめに

```ts
$ gh version
gh version 1.9.2 (2021-04-20)
https://github.com/cli/cli/releases/tag/v1.9.2
```

:::details gh オプション
```bash
$ gh
Work seamlessly with GitHub from the command line.

USAGE
  gh <command> <subcommand> [flags]

CORE COMMANDS
  gist:       Manage gists
  issue:      Manage issues
  pr:         Manage pull requests
  release:    Manage GitHub releases
  repo:       Create, clone, fork, and view repositories

ACTIONS COMMANDS
  actions:    Learn about working with GitHub actions
  run:        View details about workflow runs
  workflow:   View details about GitHub Actions workflows

ADDITIONAL COMMANDS
  alias:      Create command shortcuts
  api:        Make an authenticated GitHub API request
  auth:       Login, logout, and refresh your authentication
  completion: Generate shell completion scripts
  config:     Manage configuration for gh
  help:       Help about any command
  secret:     Manage GitHub secrets
  ssh-key:    Manage SSH keys

FLAGS
  --help      Show help for command
  --version   Show gh version

EXAMPLES
  $ gh issue create
  $ gh repo clone cli/cli
  $ gh pr checkout 321

ENVIRONMENT VARIABLES
  See 'gh help environment' for the list of supported environment variables.

LEARN MORE
  Use 'gh <command> <subcommand> --help' for more information about a command.
  Read the manual at https://cli.github.com/manual

FEEDBACK
  Open an issue using 'gh issue create -R github.com/cli/cli'
```
:::

# GitHub Actions用語

workflow...

# gh actions
GitHub Actionsのヘルプ内容を表示

:::details gh actions実行結果

```bash
$ gh actions
Welcome to GitHub Actions on the command line.

GitHub CLI integrates with Actions to help you manage runs and workflows.

Interacting with workflow runs
gh run list:      List recent workflow runs
gh run view:      View details for a workflow run or one of its jobs
gh run watch:     Watch a workflow run while it executes
gh run rerun:     Rerun a failed workflow run
gh run download:  Download artifacts generated by runs

To see more help, run 'gh help run <subcommand>'

Interacting with workflow files
gh workflow list:     List all the workflow files in your repository
gh workflow view:     View details for a workflow file
gh workflow enable:   Enable a workflow file
gh workflow disable:  Disable a workflow file
gh workflow run:      Trigger a workflow_dispatch run for a workflow file

To see more help, run 'gh help workflow <subcommand>'

For more in depth help including examples, see online documentation at:
https://docs.github.com/en/actions/guides/managing-github-actions-with-github-cli
```
:::

# gh run <subcommand>
## gh run list
最近のワークフロー実行を一覧表示
![gh-run-list](https://res.cloudinary.com/dkerzyk09/image/upload/v1619335802/blog/01f43q1rn0a7rnpgxfhtd063q1.md/1-gh-github-run-list.gif)

:::details オプション
```bash
$ gh run list --help
List recent workflow runs

USAGE
  gh run list [flags]

FLAGS
  -L, --limit int         Maximum number of runs to fetch (default 20)
  -w, --workflow string   Filter runs by workflow

INHERITED FLAGS
      --help                     Show help for command
  -R, --repo [HOST/]OWNER/REPO   Select another repository using the [HOST/]OWNER/REPO format

LEARN MORE
  Use 'gh <command> <subcommand> --help' for more information about a command.
  Read the manual at https://cli.github.com/manual
```
:::

<br>

## gh run view
個別のワークフローの詳細を表示
![gh-run-view](https://res.cloudinary.com/dkerzyk09/image/upload/v1619335817/blog/01f43q1rn0a7rnpgxfhtd063q1.md/2-gh-run-view.gif)

:::details オプション

```bash
$ gh run view --help
View a summary of a workflow run

USAGE
  gh run view [<run-id>] [flags]

FLAGS
      --exit-status   Exit with non-zero status if run failed
  -j, --job string    View a specific job ID from a run
      --log           View full log for either a run or specific job
      --log-failed    View the log for any failed steps in a run or specific job
  -v, --verbose       Show job steps
  -w, --web           Open run in the browser

INHERITED FLAGS
      --help                     Show help for command
  -R, --repo [HOST/]OWNER/REPO   Select another repository using the [HOST/]OWNER/REPO format

EXAMPLES
  # Interactively select a run to view, optionally selecting a single job
  $ gh run view

  # View a specific run
  $ gh run view 12345

  # View a specific job within a run
  $ gh run view --job 456789

  # View the full log for a specific job
  $ gh run view --log --job 456789

  # Exit non-zero if a run failed
  $ gh run view 0451 --exit-status && echo "run pending or passed"

LEARN MORE
  Use 'gh <command> <subcommand> --help' for more information about a command.
  Read the manual at https://cli.github.com/manual
```

:::

<br>

## gh run watch
実行中にワークフローの実行を監視
雑に実行しても、インタラクティブに現在実行中のワークフローを指定して監視出来るので便利だと思った

![gh-run-watch](https://res.cloudinary.com/dkerzyk09/image/upload/v1619335832/blog/01f43q1rn0a7rnpgxfhtd063q1.md/3-gh-run-watch.gif)


:::details オプション

```bash
$ gh run watch --help
Watch a run until it completes, showing its progress

USAGE
  gh run watch <run-id> [flags]

FLAGS
      --exit-status    Exit with non-zero status if run fails
  -i, --interval int   Refresh interval in seconds (default 3)

INHERITED FLAGS
      --help                     Show help for command
  -R, --repo [HOST/]OWNER/REPO   Select another repository using the [HOST/]OWNER/REPO format

EXAMPLES
  # Watch a run until it's done
  gh run watch

  # Run some other command when the run is finished
  gh run watch && notify-send "run is done!"

LEARN MORE
  Use 'gh <command> <subcommand> --help' for more information about a command.
  Read the manual at https://cli.github.com/manual
```
:::

<br>

## gh run rerun
ワークフローを再実行

![gh run rerun](https://res.cloudinary.com/dkerzyk09/image/upload/v1619335845/blog/01f43q1rn0a7rnpgxfhtd063q1.md/4-gh-run-rerun.gif)

:::details オプション
```bash
$ gh run rerun --help
Rerun a failed run

USAGE
  gh run rerun [<run-id>] [flags]

INHERITED FLAGS
      --help                     Show help for command
  -R, --repo [HOST/]OWNER/REPO   Select another repository using the [HOST/]OWNER/REPO format

LEARN MORE
  Use 'gh <command> <subcommand> --help' for more information about a command.
  Read the manual at https://cli.github.com/manual
```
:::

<br>

## gh run download

TODO

# gh workflow <subcommand>
`.github/workflows`に設定されたworkflowファイル目線の操作が行える

## gh workflow list <subcommand>
## gh workflow view <subcommand>
## gh workflow enable <subcommand>
## gh workflow disable <subcommand>
## gh workflow run
